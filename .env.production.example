# Production Environment Variables Template for Knytt Backend
# Copy this file and configure for your production environment
# DO NOT commit actual production values to git!

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Railway will provide these automatically when you add PostgreSQL service
# Use Railway's reference syntax: ${{Postgres.DATABASE_URL}}
DATABASE_URL=postgresql://user:password@host:5432/greenthumb_production
DB_USER=postgres
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD
DB_NAME=greenthumb_production
DB_HOST=your-postgres-host.railway.app
DB_PORT=5432
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
# Railway will provide these when you add Redis service
# Use Railway's reference syntax: ${{Redis.REDIS_URL}}
REDIS_URL=redis://default:password@host:6379/0
REDIS_HOST=your-redis-host.railway.app
REDIS_PORT=6379
REDIS_DB=0

# ============================================================================
# CELERY CONFIGURATION
# ============================================================================
# Should match Redis configuration
CELERY_BROKER_URL=${{Redis.REDIS_URL}}
CELERY_RESULT_BACKEND=${{Redis.REDIS_URL}}

# ============================================================================
# SECURITY - CRITICAL: GENERATE NEW SECRETS!
# ============================================================================
# Generate new secrets with: openssl rand -hex 32
# Or use scripts/generate_secrets.sh
JWT_SECRET_KEY=CHANGE_ME_RUN_openssl_rand_hex_32
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
SECRET_KEY=CHANGE_ME_RUN_openssl_rand_hex_32

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
APP_ENV=production
APP_NAME=GreenThumb Discovery
API_HOST=0.0.0.0
API_PORT=$PORT
API_VERSION=v1
DEBUG=false
LOG_LEVEL=INFO

# ============================================================================
# CORS ORIGINS - UPDATE WITH YOUR ACTUAL DOMAINS
# ============================================================================
# Add your Vercel frontend URL here after deployment
# Format: https://your-app.vercel.app,https://your-custom-domain.com
CORS_ORIGINS=https://your-frontend.vercel.app

# ============================================================================
# ML/EMBEDDINGS CONFIGURATION
# ============================================================================
ENABLE_EMBEDDINGS=true
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
VECTOR_DB_URL=
SEARCH_INDEX_PATH=/app/data/indices

# ============================================================================
# OPTIONAL: AWS/S3 CONFIGURATION
# ============================================================================
# For storing FAISS indices and ML models in production
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
S3_BUCKET_NAME=knytt-ml-models

# ============================================================================
# OPTIONAL: MONITORING & ERROR TRACKING
# ============================================================================
# Sentry for error tracking (recommended for production)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
ENABLE_METRICS=true

# ============================================================================
# OPTIONAL: RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60

# ============================================================================
# ML-SPECIFIC SETTINGS
# ============================================================================
# Model settings for production
CLIP_MODEL=ViT-B-32
CLIP_PRETRAINED=openai
ML_DEVICE=cpu
EMBEDDING_BATCH_SIZE=32
MAX_WORKERS=4
USE_FP16=false
USE_TORCH_COMPILE=false
LOG_EMBEDDING_TIME=false
HF_HOME=/app/models/cache/huggingface
TORCH_HOME=/app/models/cache/torch
